<!-- Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

<script>
  if (localStorage.getItem('data-theme') === null) {
    localStorage.setItem("data-theme", "dark");
  }
  
  let theme = localStorage.getItem('data-theme');

  const changeThemeToDark = () => {
    document.body.classList.add("text-light");
    document.body.classList.add("bg-dark");
    document.getElementById("theme-button").checked = false;
    document.getElementsByTagName("main")[0].classList.add("bg-dark");
    if (document.getElementById("shortURL-link")) {
      document.getElementById("shortURL-link").classList.add("text-warning");
    }
    localStorage.setItem("data-theme", "dark");
  }

  const changeThemeToLight = () => {
    document.body.classList.remove("text-light");
    document.body.classList.remove("bg-dark");
    document.getElementById("theme-button").checked = true;
    document.getElementsByTagName("main")[0].classList.remove("bg-dark");
    if (document.getElementById("shortURL-link")) {
      document.getElementById("shortURL-link").classList.remove("text-warning");
    }
    localStorage.setItem("data-theme", "light");
  }
  
  const clickHandler = () => {
    if (theme === "light") {
      changeThemeToDark();
    } else if (theme === "dark") {
      changeThemeToLight();
    }
    theme = localStorage.getItem('data-theme');
  }

  document.getElementById("theme-button").addEventListener("click", clickHandler);

  const checkTheme = () => {
    if (theme === "light") {
      changeThemeToLight();
    } else if (theme === "dark") {
      changeThemeToDark();
    }
    theme = localStorage.getItem('data-theme');
  }

  checkTheme();
</script>